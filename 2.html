<!DOCTYPE html> 
<html lang="ja"> 
<head> 
<meta charset="UTF-8"/> 
<script type="text/javascript">
  var kekka = "";
  
  function clearText(){
      form.text.value = ""; 
      kekka = "";
  }
  
  function btnPressed(x){
      if( kekka!="" ){
	  form.text.value = kekka;
	  kekka = "";
      }
      form.text.value += x;
  }

  function backSpace(){
      kekka = "";
      form.text.value = form.text.value.substring(0, form.text.value.length - 1);
  }

  function calculate(){
      if( kekka!="" ) return;
      kekka = eval(form.text.value);
      form.text.value += "=" + kekka;
      form.text6.value = form.text5.value;
      form.text5.value = form.text4.value;
      form.text4.value = form.text3.value;
      form.text3.value = form.text2.value;
      form.text2.value = form.text.value;
  }

  function sqrt(){
      if( kekka!="" ){
	  kekka = Math.sqrt(kekka);
      }else{
	  kekka = Math.sqrt(eval(form.text.value));
      }
      form.text.value = kekka;
  }

  function tax(){
      if( kekka!="" ){
	  kekka = Math.floor(kekka * 1.1);
      }else{
	  kekka =  Math.floor(eval(form.text.value) * 1.1);
      }
      form.text.value = kekka;
  }

  function taxFree(){
      if( kekka!="" ){
          kekka = Math.ceil(kekka * 10 / 11);
      }else{
          kekka =  Math.ceil(eval(form.text.value) * 10 / 11);
      }
      form.text.value = kekka;
  }

  function squared(){
      if( kekka!="" ){
          kekka = kekka * kekka;
      }else{
          kekka = eval(form.text.value) * eval(form.text.value);
      }
      form.text.value = kekka;
  }
	  
   
</script>

<style type="text/css">
  .btn{
      width:60px;
      height:50px;
      font-size:20px;
      border-radius: 10px;
  }
  .txt{
      width:315px;
      height:50px;
      font-size:30px;
  }
</style>

</head>
<body> 
<form name="form"> 
  <table bgcolor="aqua" border="1" cellpadding="1" cellspacing="1" align="center" >
    <tr bgcolor="white" algin="center">
      <td colspan="5"><input class="txt" type="text" name="text"></td><td colspan="5" align="center" >計算履歴</td>
    </tr>
    <tr align="center">
      <td><input class="btn" type="button" value="(" onClick="btnPressed('(')"></td>
      <td><input class="btn" type="button" value=")" onClick="btnPressed(')')"></td>
      <td><input class="btn" type="button" value="√" onClick="sqrt()"></td>
      <td><input class="btn" type="button" value="税込" onClick="tax()"></td>
      <td><input class="btn" type="button" value="税抜" onClick="taxFree()"></td>
      <td colspan="5"><input class="txt" type="text2" name="text2" size="100"></td>
    </tr>
    <tr align="center">
      <td><input class="btn" type="button" value="7" onClick="btnPressed('7')"></td>
      <td><input class="btn" type="button" value="8" onClick="btnPressed('8')"></td>
      <td><input class="btn" type="button" value="9" onClick="btnPressed('9')"></td>
      <td><input class="btn" type="button" value="BS" onClick="backSpace()"></td>
      <td><input class="btn" type="button" value="C" onClick="clearText()"></td>
      <td colspan="5"><input class="txt" type="text3" name="text3" size="100"></td>
    </tr>
    <tr align="center">
      <td><input class="btn" type="button" value="4" onClick="btnPressed('4')"></td>
      <td><input class="btn" type="button" value="5" onClick="btnPressed('5')"></td>
      <td><input class="btn" type="button" value="6" onClick="btnPressed('6')"></td>
      <td><input class="btn" type="button" value="*" onClick="btnPressed('*')"></td>
      <td><input class="btn" type="button" value="/" onClick="btnPressed('/')"></td>
      <td colspan="5"><input class="txt" type="text4" name="text4" size="100"></td>
    </tr>
    <tr align="center">
      <td><input class="btn" type="button" value="1" onClick="btnPressed('1')"></td>
      <td><input class="btn" type="button" value="2" onClick="btnPressed('2')"></td>
      <td><input class="btn" type="button" value="3" onClick="btnPressed('3')"></td>
      <td><input class="btn" type="button" value="+" onClick="btnPressed('+')"></td>
      <td><input class="btn" type="button" value="-" onClick="btnPressed('-')"></td>
      <td colspan="5"><input class="txt" type="text5" name="text5" size="100"></td>
    </tr>
    <tr align="center">
      <td><input class="btn" type="button" value="0" onClick="btnPressed('0')"></td>
      <td><input class="btn" type="button" value="00" onClick="btnPressed('00')"></td>
      <td><input class="btn" type="button" value="." onClick="btnPressed('.')"></td>
      <td><button class="btn" type="button"  onClick="squared()">x<sup>2</sup></button></td>
      <td><input class="btn" type="button" value="=" onClick="calculate()"></td>
      <td colspan="5"><input class="txt" type="text6" name="text6"></td>
    </tr>
    
  </table>
  <h1>利用方法</h1>
  計算したい計算式を入力し、'='を入力すると計算結果が計算式の横に表示されます。<br>
  税込ボタンを押すと計算結果に10％の税を加えた結果を表示します。<br>
  税抜ボタンを押すと計算結果から10％の税を引いた結果を表示します。<br>
  計算履歴には過去5回分の計算結果が表示されます。<br>
</form> 
</body> 
</html>
